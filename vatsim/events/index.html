<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>VATSIM Events</title>


    <!--Meta-->

    <meta name="description" content="Browse through VATSIM Network, see current and upcoming events, track your flight and many more!">
    <meta property="og:url" content="https://vatsim.glitch.me">
    <meta property="og:type" content="website">
    <meta property="og:title" content="VATSIM Tracking">
    <meta property="og:description" content="Browse through VATSIM Network, see current and upcoming events, track your flight and many more!">
    <meta property="og:image" content="https://cdn.glitch.global/91c248c6-bd14-4293-a1f2-a614f547a022/VATSIM_Logo_No_Tagline_2000px.png?v=1703727270474">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="vatsim.glitch.me">
    <meta property="twitter:url" content="https://vatsim.glitch.me">
    <meta name="twitter:title" content="VATSIM Tracking">
    <meta name="twitter:description" content="Browse through VATSIM Network, see current and upcoming events, track your flight and many more!">
    <meta name="twitter:image" content="https://cdn.glitch.global/91c248c6-bd14-4293-a1f2-a614f547a022/VATSIM_Logo_No_Tagline_2000px.png?v=1703727270474">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    

    <!--Stylesheets-->

    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
    <link rel="stylesheet" href="/css/font-import.css">
    <link rel="stylesheet" href="/css/keyframes.css">
    <!-- <link rel="stylesheet" href="/css/media.css"> -->
    <link rel="stylesheet" href="/css/root.css">
    <link rel="stylesheet" href="/css/navbar/nav.css">
    <link rel="stylesheet" href="/css/leaflet/leaflet.css">
    <link rel="stylesheet" href="/css/animations/opening.css">
    <link rel="stylesheet" href="/css/hamburger-menu/menu.css">
    <link rel="stylesheet" href="/css/html/maindivs.css">
    <link rel="stylesheet" href="/css/html/fixes.css">
    <link rel="stylesheet" href="/css/scroll.css">
    <link rel="stylesheet" href="/css/tbu/tobeused.css">
    <link rel="stylesheet" href="/css/events/events-sidebar.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <link rel="stylesheet" href="/css/custom-css/events/media.css">
    <link rel="icon" type="image/x-icon" href="/src/img/VATSIM-favicon_48px.ico">


    <!--Scripts-->

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
    <script src="/script/events/sidebar-height.js"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="/script/main-pages.js"></script>
    <script src="/script/loading-spinner.js"></script>
    <script src="/script/map/nocache-cords-and-zoom.js"></script>
    <script src="/script/zulu-clock.js"></script>
    <script src="/script/console-functions.js"></script>
    <script src="/script/getcountry.js"></script>a
    <script src="/script/map/map-providers.js"></script>
    <script src="/script/menu-animations.js"></script>
    <script src="/script/events/sidebox-time-show.js"></script>
    <script src="/script/events/sidebar-toggle.js"></script>

</head>

<body>
    <div id="loading-container">
        <div id="loading-spinner"></div>
    </div>
    <!-- <div> class="overlay"></div> -->
    <div id="map" style="height: 100vh; width: 100vw;"></div>
    <div class="fullscreen">
        <div class="main-content">
            <nav class="nav-bar-main">
                <div class="nav-text nav-left">
                    <div class="hamburger-menu" id="sidebar-fun">
                        <div class="menu-icon">
                            <i class="fas fa-bars"></i>
                        </div>
                        <div class="menu-options">
                            <ul>
                                <li><a class="nav-links" href="/vatsim/vs.html">Map</a></li>
                                <li><a class="nav-links" href="/events">Events</a></li>
                                <li><a class="nav-links" href="/events">Events</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="l-clock clock"></div>
                    <div class="nav-subwebsites">
                        <ul>
                            <li><a class="nav-links" href="/vatsim/vs.html">Map</a></li>
                            <li><a class="nav-links" href="/vatsim/events">Events</a></li>
                        </ul>
                    </div>
                </div>
                <div class="center">
                    <div class="logo">
                        <div class="nav-logo clr-wht">
                            <!-- <a href="http://vatsim.net" target="_blank"><img src="/src/img/VATSIM Logos for Public Use/2000w/VATSIM_Logo_Official_White_Tagline_2000px.png" alt="VATSIM Logo"></a> -->
                            <a href="http://vatsim.net" target="_blank" ><img src="/src/img/VATSIM Logos for Public Use/2000w/VATSIM_Logo_White_No_Tagline_2000px.png" alt="VATSIM logo"></a>
                        </div>
                        <div class="nav-logo-subtext">
                            <a href="http://vatsim.net/events" target="_blank"><span class="nav-subtext">events</span></a>
                        </div>
                    </div>
                </div>
                <div class="nav-logo-popup" id="popup">
                    <div class="nav-logo-popup-main">
                        <!-- <div class="nav-logo-popup-text">
                            <a>VATSIM</a>
                        </div>
                        <div class="nav-logo-popup-text">
                            <a>Text 2</a>
                        </div> -->
                    </div>
                </div>
                <div class="nav-text nav-right">
                    <div class="r-clock clock"></div>
    
                </div>
            </nav>
            <div class="event-sidebox">
                <!-- <div class="single-event-box" id="single-event-box">
                    <div class="event-box-text">
                        <div class="event-box-title">
                        </div>
                        <div class="event-box-shortDescription">
                        </div>
                        <div class="event-box-icaos">
                        </div>
                    </div>
                </div> -->
            </div>
            
        </div>
    </div>
    
    <script>
        
        $(document).ready(function () {
            $.ajax({
                url: 'https://phoenix-api.vatsim.net/api/events',
                method: 'GET',
                dataType: 'json',
                success: function (data) {
                    console.log('Fetched data:', data);
                    renderEvents(data); // Pass the array directly
                },
                error: function (error) {
                    console.error('Error fetching JSON:', error);
                }
            });
        });
        function renderEvents(events) {
    var templateScript = $('#event-template').html();
    var template = Handlebars.compile(templateScript);
    events.forEach(function (event, index, array) {
        event.shortDescription = event.shortDescription.replace(/<[^>]*>/g, ''); //remove all html tags from shortDescription.
        var html = template(event);
        var isLastItem = index === array.length - 1;
        var $eventContainer = $('<div class="event-container"></div>').append(html);
        if (isLastItem) {
            $eventContainer.find('.single-event-box').addClass('last-box');
        }
        $eventContainer.appendTo('.event-sidebox');
    });
}
    </script>
    <!-- <script src="/script/events/events-fetch.js"></script> -->
    <script id="event-template" type="text/x-handlebars-template">
        <div class="single-event-box">
            <div class="event-box-text">
                <div class="event-box-title">
                    <span>{{name}}</span>
                </div>
                <div class="event-box-shortDescription">
                    <span>{{{shortDescription}}}</span>
                </div>
                <div class="event-box-icaos">
                    <span>
                        <!-- <div class="event-box-time"> -->
                            <span>{{formatTime startTime}} - {{formatTime endTime}}</span> 
                        <!-- </div> -->
                        <!-- <div class="event-box-airports"> -->
                            <span>{{#each airports}}{{icao}}{{#unless @last}}, {{/unless}}{{/each}}</span>
                        <!-- </div> -->
                    </span>
                </div>
            </div>
        </div>
        
    </script>
    <noscript>
        <style>.a-noscript{text-decoration: none;color: rgb(67, 152, 252);font-size: 2vh;}.a-noscript:hover{text-decoration: underline;}.div1-noscript{position: fixed;top: 0;left: 0;width: 100%;height: 100%;background-color: rgb(0 0 0);display: flex;align-items: center;justify-content:center;z-index: 1050 !important;}.div2-noscript{color: white;font-weight: 900;font-size: 2.5vh;font-family: sans-serif;text-align: center;}</style><div class="div1-noscript"><div class="div2-noscript">JavaScript is dead, and so is this page...<br>Enable it! <a class="a-noscript" href="https://support.google.com/admanager/answer/12654" target="_blank">How?</a></div></div></noscript>
</body>

</html>
